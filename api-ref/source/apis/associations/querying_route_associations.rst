:original_name: ListAssociations.html

.. _ListAssociations:

Querying Route Associations
===========================

Function
--------

This API is used to query route associations.

Constraints
-----------

Pagination query is supported. You can query by state, resource type, or attachment ID. Only sorting by a single field (**id**, **created_at**, or **updated_at**) is supported.

URI
---

GET /v3/{project_id}/enterprise-router/{er_id}/route-tables/{route_table_id}/associations

.. table:: **Table 1** Path Parameters

   ============== ========= ====== ====================
   Parameter      Mandatory Type   Description
   ============== ========= ====== ====================
   project_id     Yes       String Project ID
   er_id          Yes       String Enterprise router ID
   route_table_id Yes       String Route table ID
   ============== ========= ====== ====================

.. table:: **Table 2** Query Parameters

   +-----------------+-----------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter       | Mandatory       | Type             | Description                                                                                                                                                         |
   +=================+=================+==================+=====================================================================================================================================================================+
   | limit           | No              | Integer          | Number of records on each page. Value range: **0** to **2000**                                                                                                      |
   |                 |                 |                  |                                                                                                                                                                     |
   |                 |                 |                  | Minimum: **0**                                                                                                                                                      |
   |                 |                 |                  |                                                                                                                                                                     |
   |                 |                 |                  | Maximum: **2000**                                                                                                                                                   |
   +-----------------+-----------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | marker          | No              | String           | ID of the last enterprise router on the previous page. If this parameter is left blank, the first page is queried. This parameter must be used together with limit. |
   |                 |                 |                  |                                                                                                                                                                     |
   |                 |                 |                  | Minimum: **1**                                                                                                                                                      |
   |                 |                 |                  |                                                                                                                                                                     |
   |                 |                 |                  | Maximum: **128**                                                                                                                                                    |
   +-----------------+-----------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | attachment_id   | No              | Array of strings | Attachment ID                                                                                                                                                       |
   +-----------------+-----------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | resource_type   | No              | Array of strings | -  **vpc**: VPC                                                                                                                                                     |
   |                 |                 |                  |                                                                                                                                                                     |
   |                 |                 |                  | -  **vpn**: VPN gateway                                                                                                                                             |
   |                 |                 |                  |                                                                                                                                                                     |
   |                 |                 |                  | -  **vgw**: Direct Connect virtual gateway                                                                                                                          |
   |                 |                 |                  |                                                                                                                                                                     |
   |                 |                 |                  | -  **cfw**: CFW instance                                                                                                                                            |
   +-----------------+-----------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | state           | No              | Array of strings | Status. Value options: **pending**, **available**, **modifying**, **deleting**, **deleted**, and **failed**                                                         |
   +-----------------+-----------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | sort_key        | No              | Array of strings | Keyword for sorting. The keyword can be **id**, **name**, or **state**. By default, **id** is used.                                                                 |
   +-----------------+-----------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | sort_dir        | No              | Array of strings | Sorting order. There are two value options: **asc** (ascending order) and **desc** (descending order). The default value is **asc**.                                |
   +-----------------+-----------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Request Parameters
------------------

None

Response Parameters
-------------------

**Status code: 200**

.. table:: **Table 3** Response body parameters

   +-----------------------+------------------------------------------------------------------------------+------------------------------+
   | Parameter             | Type                                                                         | Description                  |
   +=======================+==============================================================================+==============================+
   | associations          | Array of :ref:`Association <listassociations__response_association>` objects | Route table associations     |
   |                       |                                                                              |                              |
   |                       |                                                                              | Array Length: **0 - 2000**   |
   +-----------------------+------------------------------------------------------------------------------+------------------------------+
   | request_id            | String                                                                       | Request ID                   |
   +-----------------------+------------------------------------------------------------------------------+------------------------------+
   | page_info             | :ref:`PageInfo <listassociations__response_pageinfo>` object                 | Pagination query information |
   +-----------------------+------------------------------------------------------------------------------+------------------------------+

.. _listassociations__response_association:

.. table:: **Table 4** Association

   +-----------------------+--------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------+
   | Parameter             | Type                                                                           | Description                                                                                                 |
   +=======================+================================================================================+=============================================================================================================+
   | id                    | String                                                                         | Unique association ID                                                                                       |
   |                       |                                                                                |                                                                                                             |
   |                       |                                                                                | Maximum: **36**                                                                                             |
   +-----------------------+--------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------+
   | route_table_id        | String                                                                         | Unique ID of the route table                                                                                |
   |                       |                                                                                |                                                                                                             |
   |                       |                                                                                | Maximum: **36**                                                                                             |
   +-----------------------+--------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------+
   | attachment_id         | String                                                                         | Unique ID of the attachment                                                                                 |
   |                       |                                                                                |                                                                                                             |
   |                       |                                                                                | Maximum: **36**                                                                                             |
   +-----------------------+--------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------+
   | resource_type         | String                                                                         | -  **vpc**: VPC                                                                                             |
   |                       |                                                                                |                                                                                                             |
   |                       |                                                                                | -  **vpn**: VPN gateway                                                                                     |
   |                       |                                                                                |                                                                                                             |
   |                       |                                                                                | -  **vgw**: Direct Connect virtual gateway                                                                  |
   |                       |                                                                                |                                                                                                             |
   |                       |                                                                                | -  **cfw**: CFW instance                                                                                    |
   +-----------------------+--------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------+
   | resource_id           | String                                                                         | Unique ID of the attachment                                                                                 |
   +-----------------------+--------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------+
   | state                 | String                                                                         | Status. Value options: **pending**, **available**, **modifying**, **deleting**, **deleted**, and **failed** |
   +-----------------------+--------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------+
   | created_at            | String                                                                         | Creation time. It is UTC time in the format of YYYY-MM-DDTHH:mm:ss.sssZ.                                    |
   +-----------------------+--------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------+
   | updated_at            | String                                                                         | Update time. It is UTC time in the format of YYYY-MM-DDTHH:mm:ss.sssZ.                                      |
   +-----------------------+--------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------+
   | route_policy          | :ref:`ExportRoutePolicy <listassociations__response_exportroutepolicy>` object | Route that controls outbound traffic. This parameter is not supported for now.                              |
   +-----------------------+--------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------+

.. _listassociations__response_exportroutepolicy:

.. table:: **Table 5** ExportRoutePolicy

   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------+
   | Parameter             | Type                  | Description                                                                                     |
   +=======================+=======================+=================================================================================================+
   | export_policy_id      | String                | ID of the route policy that controls outbound traffic. This parameter is not supported for now. |
   |                       |                       |                                                                                                 |
   |                       |                       | Minimum: **0**                                                                                  |
   |                       |                       |                                                                                                 |
   |                       |                       | Maximum: **36**                                                                                 |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------+

.. _listassociations__response_pageinfo:

.. table:: **Table 6** PageInfo

   +---------------+---------+-------------------------------------------------------------------------------------------------------------------+
   | Parameter     | Type    | Description                                                                                                       |
   +===============+=========+===================================================================================================================+
   | next_marker   | String  | Marker of the next page. The value is the resource UUID. If the value is empty, the resource is on the last page. |
   +---------------+---------+-------------------------------------------------------------------------------------------------------------------+
   | current_count | Integer | Number of resources in the list                                                                                   |
   +---------------+---------+-------------------------------------------------------------------------------------------------------------------+

Example Requests
----------------

Querying route table associations

.. code-block:: text

   GET https://{erouter_endpoint}/v3/08d5a9564a704afda6039ae2babbef3c/enterprise-router/915a14a6-867b-4af7-83d1-70efceb146f5/route-tables/915a14a6-867b-4af7-83d1-70efceb146f9/associations

Example Responses
-----------------

**Status code: 200**

OK

.. code-block::

   {
     "associations" : [ {
       "id" : "915a14a6-867b-4af7-83d1-70efceb146f9",
       "route_table_id" : "91c013e2-d65a-474e-9177-c3e1799ca726",
       "attachment_id" : "a5b7d209-dc02-4c46-a51f-805eadd3de64",
       "resource_type" : "vpc",
       "resource_id" : "4e5fe97c-82bc-432e-87d8-06d7e157dffa",
       "state" : "pending",
       "created_at" : "2020-03-11T15:13:31",
       "updated_at" : "2020-03-11T15:13:31",
       "route_policy" : {
         "export_policy_id" : ""
       }
     } ],
     "page_info" : {
       "next_marker" : "1",
       "current_count" : 1
     },
     "request_id" : "915a14a6-867b-4af7-83d1-70efceb146f9"
   }

Status Codes
------------

=========== ===========
Status Code Description
=========== ===========
200         OK
=========== ===========

Error Codes
-----------

See :ref:`Error Codes <errorcode>`.
