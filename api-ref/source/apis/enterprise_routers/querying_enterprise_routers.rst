:original_name: ListEnterpriseRouters.html

.. _ListEnterpriseRouters:

Querying Enterprise Routers
===========================

Function
--------

This API is used to query enterprise routers.

Constraints
-----------

Parameters **marker** and **limit** are used for pagination query. The two parameters take effect only when they are used together. Only sorting by a single field (**id**, **name**, **description**, **created_at**, or **updated_at**) is supported.

URI
---

GET /v3/{project_id}/enterprise-router/instances

.. table:: **Table 1** Path Parameters

   ========== ========= ====== ===========
   Parameter  Mandatory Type   Description
   ========== ========= ====== ===========
   project_id Yes       String Project ID
   ========== ========= ====== ===========

.. table:: **Table 2** Query Parameters

   +-----------------------+-----------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter             | Mandatory       | Type             | Description                                                                                                                                                         |
   +=======================+=================+==================+=====================================================================================================================================================================+
   | limit                 | No              | Integer          | Number of records on each page. Value range: **0** to **2000**                                                                                                      |
   |                       |                 |                  |                                                                                                                                                                     |
   |                       |                 |                  | Minimum: **0**                                                                                                                                                      |
   |                       |                 |                  |                                                                                                                                                                     |
   |                       |                 |                  | Maximum: **2000**                                                                                                                                                   |
   +-----------------------+-----------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | marker                | No              | String           | ID of the last enterprise router on the previous page. If this parameter is left blank, the first page is queried. This parameter must be used together with limit. |
   |                       |                 |                  |                                                                                                                                                                     |
   |                       |                 |                  | Minimum: **1**                                                                                                                                                      |
   |                       |                 |                  |                                                                                                                                                                     |
   |                       |                 |                  | Maximum: **128**                                                                                                                                                    |
   +-----------------------+-----------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | enterprise_project_id | No              | Array of strings | Enterprise project ID                                                                                                                                               |
   +-----------------------+-----------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | state                 | No              | Array of strings | Resource status. Value options: **pending**, **available**, **modifying**, **deleting**, **deleted**, **failed**, or **freezed**.                                   |
   +-----------------------+-----------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | id                    | No              | Array of strings | Query by resource ID. Multiple resources can be queried at a time.                                                                                                  |
   +-----------------------+-----------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | resource_id           | No              | Array of strings | Attachment resource IDs                                                                                                                                             |
   +-----------------------+-----------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | owned_by_self         | No              | Boolean          | Whether the resources belong to the current account.                                                                                                                |
   |                       |                 |                  |                                                                                                                                                                     |
   |                       |                 |                  | -  If the value is **true**, the resources belong to the current account.                                                                                           |
   |                       |                 |                  |                                                                                                                                                                     |
   |                       |                 |                  | -  If the value is **false**, the resources include those in the current account and those shared with the current account.                                         |
   +-----------------------+-----------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | sort_key              | No              | Array of strings | Keyword for sorting. The keyword can be **id**, **name**, or **state**. By default, **id** is used.                                                                 |
   +-----------------------+-----------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | sort_dir              | No              | Array of strings | Sorting order. There are two value options: **asc** (ascending order) and **desc** (descending order). The default value is **asc**.                                |
   +-----------------------+-----------------+------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Request Parameters
------------------

None

Response Parameters
-------------------

**Status code: 200**

.. table:: **Table 3** Response body parameters

   +------------+---------------------------------------------------------------------------------------------+------------------------------+
   | Parameter  | Type                                                                                        | Description                  |
   +============+=============================================================================================+==============================+
   | instances  | Array of :ref:`EnterpriseRouter <listenterpriserouters__response_enterpriserouter>` objects | Enterprise routers           |
   +------------+---------------------------------------------------------------------------------------------+------------------------------+
   | page_info  | :ref:`PageInfo <listenterpriserouters__response_pageinfo>` object                           | Pagination query information |
   +------------+---------------------------------------------------------------------------------------------+------------------------------+
   | request_id | String                                                                                      | Request ID                   |
   +------------+---------------------------------------------------------------------------------------------+------------------------------+

.. _listenterpriserouters__response_enterpriserouter:

.. table:: **Table 4** EnterpriseRouter

   +------------------------------------+---------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter                          | Type                                                                | Description                                                                                                                                              |
   +====================================+=====================================================================+==========================================================================================================================================================+
   | id                                 | String                                                              | Enterprise router ID                                                                                                                                     |
   +------------------------------------+---------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | name                               | String                                                              | Enterprise router name                                                                                                                                   |
   +------------------------------------+---------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | description                        | String                                                              | Supplementary information about an enterprise router                                                                                                     |
   +------------------------------------+---------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | state                              | String                                                              | Resource status. The value can be **pending**, **available**, **modifying**, **deleting**, **deleted**, **failed**, or **freezed**.                      |
   +------------------------------------+---------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | tags                               | Array of :ref:`Tag <listenterpriserouters__response_tag>` objects   | Tag information                                                                                                                                          |
   +------------------------------------+---------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | charge_mode                        | String                                                              | Billing mode (pay-per-use)                                                                                                                               |
   |                                    |                                                                     |                                                                                                                                                          |
   |                                    |                                                                     | Default: **postPaid**                                                                                                                                    |
   +------------------------------------+---------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | instance_type                      | String                                                              | Instance type. This parameter is not supported.                                                                                                          |
   +------------------------------------+---------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | created_at                         | String                                                              | Creation time in the format YYYY-MM-DDTHH:mm:ss.sssZ                                                                                                     |
   +------------------------------------+---------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | updated_at                         | String                                                              | Update time in the format YYYY-MM-DDTHH:mm:ss.sssZ                                                                                                       |
   +------------------------------------+---------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | enterprise_project_id              | String                                                              | Enterprise project ID                                                                                                                                    |
   +------------------------------------+---------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | project_id                         | String                                                              | Project ID                                                                                                                                               |
   +------------------------------------+---------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | asn                                | Long                                                                | Enterprise router BGP ASN                                                                                                                                |
   +------------------------------------+---------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | support_multicast                  | Boolean                                                             | Whether an enterprise router supports multicast. The default value is **false**, indicating that multicast is disabled. This parameter is not supported. |
   +------------------------------------+---------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | enable_default_propagation         | Boolean                                                             | Whether to enable the Default Route Table Propagation function. The default value is **false**, indicating that the function is disabled.                |
   +------------------------------------+---------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | enable_default_association         | Boolean                                                             | Whether to enable the Default Route Table Association function. The default value is **false**, indicating that the function is disabled.                |
   +------------------------------------+---------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | default_propagation_route_table_id | String                                                              | Default propagation route table ID                                                                                                                       |
   +------------------------------------+---------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | default_association_route_table_id | String                                                              | Default association route table ID                                                                                                                       |
   +------------------------------------+---------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | availability_zone_ids              | Array of strings                                                    | AZs where the enterprise router is located                                                                                                               |
   +------------------------------------+---------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | auto_accept_shared_attachments     | Boolean                                                             | Whether to automatically accept shared attachments. The default value is **false**, indicating that the function is disabled.                            |
   +------------------------------------+---------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | cidr_blocks                        | Array of strings                                                    | CIDR block of an enterprise router. This parameter is not supported.                                                                                     |
   +------------------------------------+---------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | bandwidth                          | :ref:`Bandwidth <listenterpriserouters__response_bandwidth>` object | Bandwidth request body. This parameter is not supported.                                                                                                 |
   +------------------------------------+---------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | billing_info                       | String                                                              | Order information. This parameter is not supported.                                                                                                      |
   +------------------------------------+---------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | frozen_scene                       | String                                                              | Frozen reason. The reason can be account arrears, public security, and violations of laws and regulations. This parameter is not supported.              |
   +------------------------------------+---------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _listenterpriserouters__response_tag:

.. table:: **Table 5** Tag

   +-----------------------+-----------------------+------------------------------------------------------------------------------------------+
   | Parameter             | Type                  | Description                                                                              |
   +=======================+=======================+==========================================================================================+
   | key                   | String                | Tag key. The key:                                                                        |
   |                       |                       |                                                                                          |
   |                       |                       | -  Can contain UTF-8 letters, digits, spaces, and the following characters: ``_.:=+-@.`` |
   |                       |                       |                                                                                          |
   |                       |                       | -  Cannot start with *sys* because it indicates a system tag.                            |
   |                       |                       |                                                                                          |
   |                       |                       | -  Cannot be empty (the length cannot be 0).                                             |
   |                       |                       |                                                                                          |
   |                       |                       | -  Can contain 1 to 128 characters.                                                      |
   |                       |                       |                                                                                          |
   |                       |                       | Minimum: **1**                                                                           |
   |                       |                       |                                                                                          |
   |                       |                       | Maximum: **128**                                                                         |
   +-----------------------+-----------------------+------------------------------------------------------------------------------------------+
   | value                 | String                | Tag value. The value:                                                                    |
   |                       |                       |                                                                                          |
   |                       |                       | -  Can contain UTF-8 letters, digits, spaces, and the following characters: ``_.:=+-@.`` |
   |                       |                       |                                                                                          |
   |                       |                       | -  Can be empty or null.                                                                 |
   |                       |                       |                                                                                          |
   |                       |                       | -  Can contain 0 to 255 characters.                                                      |
   |                       |                       |                                                                                          |
   |                       |                       | Minimum: **0**                                                                           |
   |                       |                       |                                                                                          |
   |                       |                       | Maximum: **255**                                                                         |
   +-----------------------+-----------------------+------------------------------------------------------------------------------------------+

.. _listenterpriserouters__response_bandwidth:

.. table:: **Table 6** Bandwidth

   +-----------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter             | Type                  | Description                                                                                                                                                                                            |
   +=======================+=======================+========================================================================================================================================================================================================+
   | size                  | Integer               | Bandwidth, in Mbit/s. The default value is **0**, indicating that the bandwidth is not limited. The value **-1** indicates that the bandwidth is limited to 2 kbit/s. This parameter is not supported. |
   |                       |                       |                                                                                                                                                                                                        |
   |                       |                       | Minimum: **-1**                                                                                                                                                                                        |
   |                       |                       |                                                                                                                                                                                                        |
   |                       |                       | Default: **0**                                                                                                                                                                                         |
   +-----------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _listenterpriserouters__response_pageinfo:

.. table:: **Table 7** PageInfo

   +---------------+---------+-------------------------------------------------------------------------------------------------------------------+
   | Parameter     | Type    | Description                                                                                                       |
   +===============+=========+===================================================================================================================+
   | next_marker   | String  | Marker of the next page. The value is the resource UUID. If the value is empty, the resource is on the last page. |
   +---------------+---------+-------------------------------------------------------------------------------------------------------------------+
   | current_count | Integer | Number of resources in the list                                                                                   |
   +---------------+---------+-------------------------------------------------------------------------------------------------------------------+

Example Requests
----------------

-  Querying two records in pagination

   .. code-block:: text

      GET https://{erouter_endpoint}/v3/08d5a9564a704afda6039ae2babbef3c/enterprise-router/instances?limit=2&marker=1

-  Querying all enterprise routers

   .. code-block:: text

      GET https://{erouter_endpoint}/v3/08d5a9564a704afda6039ae2babbef3c/enterprise-router/instances

Example Responses
-----------------

**Status code: 200**

OK

.. code-block::

   {
     "instances" : [ {
       "id" : "94c2b814-99dc-939a-e811-ae84c61ea3ff",
       "name" : "my_er",
       "description" : "this is my first enterprise router",
       "asn" : 64512,
       "project_id" : "08d5a9564a704afda6039ae2babbef3c",
       "enable_default_association" : true,
       "enable_default_propagation" : true,
       "default_association_route_table_id" : "7f7f738f-453c-40b1-be26-28e7b9e390c1",
       "default_propagation_route_table_id" : "7f7f738f-453c-40b1-be26-28e7b9e390c1",
       "auto_accept_shared_attachments" : false,
       "created_at" : "2019-09-06 02:11:13Z",
       "updated_at" : "2019-09-06 02:11:13Z",
       "tags" : [ {
         "key" : "key",
         "value" : "value"
       } ],
       "enterprise_project_id" : 0,
       "availability_zone_ids" : [ "az1", "az2" ]
     } ],
     "request_id" : "915a14a6-867b-4af7-83d1-70efceb146f9",
     "page_info" : {
       "next_marker" : "2",
       "current_count" : 1
     }
   }

Status Codes
------------

=========== ===========
Status Code Description
=========== ===========
200         OK
=========== ===========

Error Codes
-----------

See :ref:`Error Codes <errorcode>`.
