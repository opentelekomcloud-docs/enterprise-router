:original_name: ListAttachments.html

.. _ListAttachments:

Querying Attachments
====================

Function
--------

This API is used to query the attachments of the enterprise router.

Constraints
-----------

-  Filtering query is supported. The filtering criteria include **state**, **resource_type**, and **resource_id**. You can query multiple resources at a time or use combined criteria to query resources.

-  Pagination query is supported. You can use **limit** and **marker** together for pagination query.

-  Only sorting by a single field (**id**, **name**, **description**, **created_at**, or **updated_at**) is supported.

URI
---

GET /v3/{project_id}/enterprise-router/{er_id}/attachments

.. table:: **Table 1** Path Parameters

   ========== ========= ====== ====================
   Parameter  Mandatory Type   Description
   ========== ========= ====== ====================
   project_id Yes       String Project ID
   er_id      Yes       String Enterprise router ID
   ========== ========= ====== ====================

.. table:: **Table 2** Query Parameters

   +-----------------+-----------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter       | Mandatory       | Type             | Description                                                                                                                                                                          |
   +=================+=================+==================+======================================================================================================================================================================================+
   | limit           | No              | Integer          | Number of records on each page. Value range: **0** to **2000**                                                                                                                       |
   |                 |                 |                  |                                                                                                                                                                                      |
   |                 |                 |                  | Minimum: **0**                                                                                                                                                                       |
   |                 |                 |                  |                                                                                                                                                                                      |
   |                 |                 |                  | Maximum: **2000**                                                                                                                                                                    |
   +-----------------+-----------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | marker          | No              | String           | ID of the last enterprise router on the previous page. If this parameter is left blank, the first page is queried. This parameter must be used together with limit.                  |
   |                 |                 |                  |                                                                                                                                                                                      |
   |                 |                 |                  | Minimum: **1**                                                                                                                                                                       |
   |                 |                 |                  |                                                                                                                                                                                      |
   |                 |                 |                  | Maximum: **128**                                                                                                                                                                     |
   +-----------------+-----------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | state           | No              | Array of strings | Attachment status. Value options: **pending**, **available**, **modifying**, **deleting**, **deleted**, **failed**, **pending_acceptance**, **rejected**, and **initiating_request** |
   +-----------------+-----------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | resource_type   | No              | Array of strings | -  **vpc**: VPC                                                                                                                                                                      |
   |                 |                 |                  |                                                                                                                                                                                      |
   |                 |                 |                  | -  **vpn**: VPN gateway                                                                                                                                                              |
   |                 |                 |                  |                                                                                                                                                                                      |
   |                 |                 |                  | -  **vgw**: Direct Connect virtual gateway                                                                                                                                           |
   |                 |                 |                  |                                                                                                                                                                                      |
   |                 |                 |                  | -  **cfw**: CFW instance                                                                                                                                                             |
   +-----------------+-----------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | resource_id     | No              | Array of strings | Attachment resource IDs                                                                                                                                                              |
   +-----------------+-----------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | sort_key        | No              | Array of strings | Keyword for sorting. The keyword can be **id**, **name**, or **state**. By default, **id** is used.                                                                                  |
   +-----------------+-----------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | sort_dir        | No              | Array of strings | Sorting order. There are two value options: **asc** (ascending order) and **desc** (descending order). The default value is **asc**.                                                 |
   +-----------------+-----------------+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Request Parameters
------------------

None

Response Parameters
-------------------

**Status code: 200**

.. table:: **Table 3** Response body parameters

   +-------------+-----------------------------------------------------------------------------------------+------------------------------+
   | Parameter   | Type                                                                                    | Description                  |
   +=============+=========================================================================================+==============================+
   | attachments | Array of :ref:`AttachmentDetails <listattachments__response_attachmentdetails>` objects | Attachments                  |
   +-------------+-----------------------------------------------------------------------------------------+------------------------------+
   | page_info   | :ref:`PageInfo <listattachments__response_pageinfo>` object                             | Pagination query information |
   +-------------+-----------------------------------------------------------------------------------------+------------------------------+
   | request_id  | String                                                                                  | Request ID                   |
   +-------------+-----------------------------------------------------------------------------------------+------------------------------+

.. _listattachments__response_attachmentdetails:

.. table:: **Table 4** AttachmentDetails

   +-----------------------+-------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter             | Type                                                        | Description                                                                                                                                                                                                    |
   +=======================+=============================================================+================================================================================================================================================================================================================+
   | id                    | String                                                      | Attachment ID                                                                                                                                                                                                  |
   +-----------------------+-------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | name                  | String                                                      | Attachment name                                                                                                                                                                                                |
   +-----------------------+-------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | description           | String                                                      | Attachment description                                                                                                                                                                                         |
   +-----------------------+-------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | state                 | String                                                      | Attachment status. Value options: **pending**, **available**, **modifying**, **deleting**, **deleted**, **failed**, **pending_acceptance**, **rejected**, **initiating_request**, **freezed**, or **invalid**. |
   +-----------------------+-------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | created_at            | String                                                      | Creation time in the format YYYY-MM-DDTHH:mm:ss.sssZ                                                                                                                                                           |
   +-----------------------+-------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | updated_at            | String                                                      | Update time in the format YYYY-MM-DDTHH:mm:ss.sssZ                                                                                                                                                             |
   +-----------------------+-------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | tags                  | Array of :ref:`Tag <listattachments__response_tag>` objects | Attachment tags.                                                                                                                                                                                               |
   +-----------------------+-------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | project_id            | String                                                      | Project ID                                                                                                                                                                                                     |
   +-----------------------+-------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | er_id                 | String                                                      | Enterprise router ID                                                                                                                                                                                           |
   +-----------------------+-------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | resource_id           | String                                                      | Attached resource ID on its own service console                                                                                                                                                                |
   +-----------------------+-------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | resource_type         | String                                                      | Attachment type.                                                                                                                                                                                               |
   |                       |                                                             |                                                                                                                                                                                                                |
   |                       |                                                             | -  **vgw**: Direct Connect virtual gateway                                                                                                                                                                     |
   |                       |                                                             |                                                                                                                                                                                                                |
   |                       |                                                             | -  **vpn**: VPN gateway                                                                                                                                                                                        |
   |                       |                                                             |                                                                                                                                                                                                                |
   |                       |                                                             | -  **vpc**: VPC                                                                                                                                                                                                |
   |                       |                                                             |                                                                                                                                                                                                                |
   |                       |                                                             | -  **cfw**: CFW instance                                                                                                                                                                                       |
   +-----------------------+-------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | resource_project_id   | String                                                      | ID of the project that the resource belongs to                                                                                                                                                                 |
   +-----------------------+-------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | associated            | Boolean                                                     | Whether the attachment is associated.                                                                                                                                                                          |
   +-----------------------+-------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | route_table_id        | String                                                      | Association route table ID                                                                                                                                                                                     |
   +-----------------------+-------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | frozen_scene          | String                                                      | Frozen reason. The reason can be account arrears, public security, and violations of laws and regulations. This parameter is not supported.                                                                    |
   +-----------------------+-------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | ipv6_enable           | Boolean                                                     | Whether to enable IPv6. The value **false** indicates that IPv6 is disabled, and the value **true** indicates that IPv6 is enabled. This parameter is not supported.                                           |
   +-----------------------+-------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _listattachments__response_tag:

.. table:: **Table 5** Tag

   +-----------------------+-----------------------+------------------------------------------------------------------------------------------+
   | Parameter             | Type                  | Description                                                                              |
   +=======================+=======================+==========================================================================================+
   | key                   | String                | Tag key. The key:                                                                        |
   |                       |                       |                                                                                          |
   |                       |                       | -  Can contain UTF-8 letters, digits, spaces, and the following characters: ``_.:=+-@.`` |
   |                       |                       |                                                                                          |
   |                       |                       | -  Cannot start with *sys* because it indicates a system tag.                            |
   |                       |                       |                                                                                          |
   |                       |                       | -  Cannot be empty (the length cannot be 0).                                             |
   |                       |                       |                                                                                          |
   |                       |                       | -  Can contain 1 to 128 characters.                                                      |
   |                       |                       |                                                                                          |
   |                       |                       | Minimum: **1**                                                                           |
   |                       |                       |                                                                                          |
   |                       |                       | Maximum: **128**                                                                         |
   +-----------------------+-----------------------+------------------------------------------------------------------------------------------+
   | value                 | String                | Tag value. The value:                                                                    |
   |                       |                       |                                                                                          |
   |                       |                       | -  Can contain UTF-8 letters, digits, spaces, and the following characters: ``_.:=+-@.`` |
   |                       |                       |                                                                                          |
   |                       |                       | -  Can be empty or null.                                                                 |
   |                       |                       |                                                                                          |
   |                       |                       | -  Can contain 0 to 255 characters.                                                      |
   |                       |                       |                                                                                          |
   |                       |                       | Minimum: **0**                                                                           |
   |                       |                       |                                                                                          |
   |                       |                       | Maximum: **255**                                                                         |
   +-----------------------+-----------------------+------------------------------------------------------------------------------------------+

.. _listattachments__response_pageinfo:

.. table:: **Table 6** PageInfo

   +---------------+---------+-------------------------------------------------------------------------------------------------------------------+
   | Parameter     | Type    | Description                                                                                                       |
   +===============+=========+===================================================================================================================+
   | next_marker   | String  | Marker of the next page. The value is the resource UUID. If the value is empty, the resource is on the last page. |
   +---------------+---------+-------------------------------------------------------------------------------------------------------------------+
   | current_count | Integer | Number of resources in the list                                                                                   |
   +---------------+---------+-------------------------------------------------------------------------------------------------------------------+

Example Requests
----------------

Querying attachments

.. code-block:: text

   GET https://{erouter_endpoint}/v3/08d5a9564a704afda6039ae2babbef3c/enterprise-router/4ab54142-7c92-48ad-8288-77727a231052/attachments

Example Responses
-----------------

**Status code: 200**

OK

.. code-block::

   {
     "attachments" : [ {
       "id" : "6f83b848-8331-4271-ac0c-ef94b7686402",
       "name" : "vpc-001",
       "description" : "vpc attachment",
       "resource_id" : "b715e131-3371-4e17-a2de-4f669e24439a",
       "resource_type" : "vpc",
       "project_id" : "0605767a9980d5762fbcc00b3537e757",
       "state" : "available",
       "created_at" : "2020-03-11T15:13:31Z",
       "updated_at" : "2020-03-11T15:13:31Z"
     }, {
       "id" : "6f83b848-8331-4271-ac0c-ef94b7686403",
       "name" : "vpc-002",
       "description" : "for test",
       "resource_id" : "4b8567f6-358f-4a7f-8cd3-3cbb82c0b25f",
       "resource_type" : "vpc",
       "project_id" : "0605767a9980d5762fbcc00b3537e757",
       "state" : "available",
       "created_at" : "2020-03-11T15:13:31Z",
       "updated_at" : "2020-03-11T15:13:31Z"
     } ],
     "page_info" : {
       "next_marker" : "1",
       "current_count" : 2
     },
     "request_id" : "b715e131-3371-4e17-a2de-4f669e24439a"
   }

Status Codes
------------

=========== ===========
Status Code Description
=========== ===========
200         OK
=========== ===========

Error Codes
-----------

See :ref:`Error Codes <errorcode>`.
