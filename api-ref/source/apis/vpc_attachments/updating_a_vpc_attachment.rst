:original_name: UpdateVpcAttachment.html

.. _UpdateVpcAttachment:

Updating a VPC Attachment
=========================

Function
--------

This API is used to update basic information about a VPC attachment.

URI
---

PUT /v3/{project_id}/enterprise-router/{er_id}/vpc-attachments/{vpc_attachment_id}

.. table:: **Table 1** Path Parameters

   ================= ========= ====== ====================
   Parameter         Mandatory Type   Description
   ================= ========= ====== ====================
   project_id        Yes       String Project ID
   er_id             Yes       String Enterprise router ID
   vpc_attachment_id Yes       String VPC attachment ID
   ================= ========= ====== ====================

Request Parameters
------------------

.. table:: **Table 2** Request body parameters

   +----------------+-----------+----------------------------------------------------------------------------------------------+-------------------------------------------+
   | Parameter      | Mandatory | Type                                                                                         | Description                               |
   +================+===========+==============================================================================================+===========================================+
   | vpc_attachment | No        | :ref:`UpdateVpcAttachmentBody <updatevpcattachment__request_updatevpcattachmentbody>` object | Request body for updating VPC information |
   +----------------+-----------+----------------------------------------------------------------------------------------------+-------------------------------------------+

.. _updatevpcattachment__request_updatevpcattachmentbody:

.. table:: **Table 3** UpdateVpcAttachmentBody

   +-----------------+-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter       | Mandatory       | Type            | Description                                                                                                                              |
   +=================+=================+=================+==========================================================================================================================================+
   | description     | No              | String          | Supplementary information about the VPC attachment. The value contains a maximum of 36 characters in UUID format with hyphens (-).       |
   |                 |                 |                 |                                                                                                                                          |
   |                 |                 |                 | Minimum: **0**                                                                                                                           |
   |                 |                 |                 |                                                                                                                                          |
   |                 |                 |                 | Maximum: **255**                                                                                                                         |
   +-----------------+-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------+
   | name            | No              | String          | VPC attachment name. The value can contain 1 to 64 characters, including letters, digits, underscores (_), hyphens (-), and periods (.). |
   |                 |                 |                 |                                                                                                                                          |
   |                 |                 |                 | Minimum: **1**                                                                                                                           |
   |                 |                 |                 |                                                                                                                                          |
   |                 |                 |                 | Maximum: **64**                                                                                                                          |
   +-----------------+-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------+

Response Parameters
-------------------

**Status code: 200**

.. table:: **Table 4** Response body parameters

   +----------------+-----------------------------------------------------------------------------------------+----------------+
   | Parameter      | Type                                                                                    | Description    |
   +================+=========================================================================================+================+
   | vpc_attachment | :ref:`VpcAttachmentDetails <updatevpcattachment__response_vpcattachmentdetails>` object | VPC attachment |
   +----------------+-----------------------------------------------------------------------------------------+----------------+
   | request_id     | String                                                                                  | Request ID     |
   +----------------+-----------------------------------------------------------------------------------------+----------------+

.. _updatevpcattachment__response_vpcattachmentdetails:

.. table:: **Table 5** VpcAttachmentDetails

   +------------------------+-----------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter              | Type                                                                                    | Description                                                                                                                                                                                                                                                |
   +========================+=========================================================================================+============================================================================================================================================================================================================================================================+
   | id                     | String                                                                                  | VPC attachment ID                                                                                                                                                                                                                                          |
   +------------------------+-----------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | name                   | String                                                                                  | VPC attachment name                                                                                                                                                                                                                                        |
   +------------------------+-----------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | vpc_id                 | String                                                                                  | VPC id                                                                                                                                                                                                                                                     |
   +------------------------+-----------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | virsubnet_id           | String                                                                                  | VPC subnet ID                                                                                                                                                                                                                                              |
   +------------------------+-----------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | auto_create_vpc_routes | Boolean                                                                                 | The default value is **false**. If this parameter is set to **true**, routes with this enterprise router as the next hop and 10.0.0.0/8, 172.16.0.0/12, and 192.168.0.0/16 as the destinations will be automatically added to the route tables of the VPC. |
   |                        |                                                                                         |                                                                                                                                                                                                                                                            |
   |                        |                                                                                         | Default: **false**                                                                                                                                                                                                                                         |
   +------------------------+-----------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | state                  | String                                                                                  | VPC attachment status. The value can be **pending**, **available**, **modifying**, **deleting**, **deleted**, **failed**, **initiating_request**, **rejected**, **pending_acceptance**, **freezed**, or **invalid**.                                       |
   +------------------------+-----------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | created_at             | String                                                                                  | Creation time in the format YYYY-MM-DDTHH:mm:ss.sssZ                                                                                                                                                                                                       |
   +------------------------+-----------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | updated_at             | String                                                                                  | Update time in the format YYYY-MM-DDTHH:mm:ss.sssZ                                                                                                                                                                                                         |
   +------------------------+-----------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | tags                   | Array of :ref:`Tag <updatevpcattachment__response_tag>` objects                         | Tag information                                                                                                                                                                                                                                            |
   +------------------------+-----------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | description            | String                                                                                  | Supplementary information about the VPC attachment                                                                                                                                                                                                         |
   +------------------------+-----------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | project_id             | String                                                                                  | Project ID                                                                                                                                                                                                                                                 |
   +------------------------+-----------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | vpc_project_id         | String                                                                                  | ID of the project that the VPC belongs to                                                                                                                                                                                                                  |
   +------------------------+-----------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | ipv6_enable            | Boolean                                                                                 | The default value is **false**. If the value is **true**, IPv6 is enabled for the VPC attachment. This parameter is not supported for now.                                                                                                                 |
   |                        |                                                                                         |                                                                                                                                                                                                                                                            |
   |                        |                                                                                         | Default: **false**                                                                                                                                                                                                                                         |
   +------------------------+-----------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | route_synchronization  | :ref:`RouteSynchronization <updatevpcattachment__response_routesynchronization>` object | Route synchronization configuration. This parameter is not supported.                                                                                                                                                                                      |
   +------------------------+-----------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | frozen_scene           | String                                                                                  | Frozen reason. The reason can be account arrears, public security, and violations of laws and regulations. This parameter is not supported.                                                                                                                |
   +------------------------+-----------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _updatevpcattachment__response_tag:

.. table:: **Table 6** Tag

   +-----------------------+-----------------------+------------------------------------------------------------------------------------------+
   | Parameter             | Type                  | Description                                                                              |
   +=======================+=======================+==========================================================================================+
   | key                   | String                | Tag key. The key:                                                                        |
   |                       |                       |                                                                                          |
   |                       |                       | -  Can contain UTF-8 letters, digits, spaces, and the following characters: ``_.:=+-@.`` |
   |                       |                       |                                                                                          |
   |                       |                       | -  Cannot start with *sys* because it indicates a system tag.                            |
   |                       |                       |                                                                                          |
   |                       |                       | -  Cannot be empty (the length cannot be 0).                                             |
   |                       |                       |                                                                                          |
   |                       |                       | -  Can contain 1 to 128 characters.                                                      |
   |                       |                       |                                                                                          |
   |                       |                       | Minimum: **1**                                                                           |
   |                       |                       |                                                                                          |
   |                       |                       | Maximum: **128**                                                                         |
   +-----------------------+-----------------------+------------------------------------------------------------------------------------------+
   | value                 | String                | Tag value. The value:                                                                    |
   |                       |                       |                                                                                          |
   |                       |                       | -  Can contain UTF-8 letters, digits, spaces, and the following characters: ``_.:=+-@.`` |
   |                       |                       |                                                                                          |
   |                       |                       | -  Can be empty or null.                                                                 |
   |                       |                       |                                                                                          |
   |                       |                       | -  Can contain 0 to 255 characters.                                                      |
   |                       |                       |                                                                                          |
   |                       |                       | Minimum: **0**                                                                           |
   |                       |                       |                                                                                          |
   |                       |                       | Maximum: **255**                                                                         |
   +-----------------------+-----------------------+------------------------------------------------------------------------------------------+

.. _updatevpcattachment__response_routesynchronization:

.. table:: **Table 7** RouteSynchronization

   +------------------------------+---------+-------------------------------------------------------------------------------------------------------------------------------+
   | Parameter                    | Type    | Description                                                                                                                   |
   +==============================+=========+===============================================================================================================================+
   | route_synchronization_enable | Boolean | Whether to enable route synchronization.                                                                                      |
   +------------------------------+---------+-------------------------------------------------------------------------------------------------------------------------------+
   | vpc_route_table_type         | String  | VPC route table where routes are to be synchronized.                                                                          |
   +------------------------------+---------+-------------------------------------------------------------------------------------------------------------------------------+
   | route_type                   | String  | Type of the route to be synchronized.                                                                                         |
   +------------------------------+---------+-------------------------------------------------------------------------------------------------------------------------------+
   | conflict_policy              | String  | A conflict policy that specifies whether to synchronize routes with the same destination and next hop to the VPC route table. |
   +------------------------------+---------+-------------------------------------------------------------------------------------------------------------------------------+

Example Requests
----------------

Updating a VPC attachment (changing its name to **new-vpc-attach**)

.. code-block:: text

   PUT https://{erouter_endpoint}/v3/08d5a9564a704afda6039ae2babbef3c/enterprise-router/f1a28dfd-186f-4625-b6b1-f05e5e8609c0/vpc-attachments/3b9724e9-49ec-4d21-9191-3d703133b910

   {
     "vpc_attachment" : {
       "name" : "new-vpc-attach"
     }
   }

Example Responses
-----------------

**Status code: 200**

OK

.. code-block::

   {
     "vpc_attachment" : {
       "id" : "3b9724e9-49ec-4d21-9191-3d703133b910",
       "name" : "new-vpc-attach",
       "vpc_id" : "b715e131-3371-4e17-a2de-4f669e24439a",
       "virsubnet_id" : "aacdc21d-90f9-45ef-ab48-80ec1bbe15b8",
       "auto_create_vpc_routes" : false,
       "project_id" : "08d5a9564a704afda6039ae2babbef3c",
       "ipv6_enable" : "false,",
       "state" : "available",
       "created_at" : "2020-03-11T15:13:31Z",
       "updated_at" : "2020-03-11T15:13:31Z"
     },
     "request_id" : "915a14a6-867b-4af7-83d1-70efceb146f9"
   }

Status Codes
------------

=========== ===========
Status Code Description
=========== ===========
200         OK
=========== ===========

Error Codes
-----------

See :ref:`Error Codes <errorcode>`.
