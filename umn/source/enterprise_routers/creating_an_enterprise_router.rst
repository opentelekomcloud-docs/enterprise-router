:original_name: er_01_0069.html

.. _er_01_0069:

Creating an Enterprise Router
=============================

Scenarios
---------

Create an enterprise router.

Procedure
---------

#. Log in to the management console.

#. Click |image1| in the upper left corner and select the desired region and project.

#. Click **Service List** and choose **Networking** > **Enterprise Router**.

   The **Enterprise Router** page is displayed.

#. Click **Create Enterprise Router** in the upper right corner.

   The **Create Enterprise Router** page is displayed.


   .. figure:: /_static/images/en-us_image_0000001675058246.png
      :alt: **Figure 1** Create Enterprise Router

      **Figure 1** Create Enterprise Router

#. Configure the parameters based on :ref:`Table 1 <er_01_0069__table7204821194013>`.

   .. _er_01_0069__table7204821194013:

   .. table:: **Table 1** Parameters for creating an enterprise router

      +---------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------+
      | Parameter                       | Setting                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Example Value         |
      +=================================+===============================================================================================================================================================================================================================================================================================================================================================================================================================================================+=======================+
      | Region                          | Mandatory                                                                                                                                                                                                                                                                                                                                                                                                                                                     | ``-``                 |
      |                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                       |
      |                                 | Select the region nearest to you to ensure the lowest latency possible.                                                                                                                                                                                                                                                                                                                                                                                       |                       |
      +---------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------+
      | AZ                              | Mandatory                                                                                                                                                                                                                                                                                                                                                                                                                                                     | AZ1                   |
      |                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                       |
      |                                 | An AZ is a physical location where resources use independent power supplies and networks. AZs are physically isolated but interconnected through an internal network. Each region contains multiple AZs. If one AZ is unavailable, the other AZs in the same region continue to provide services.                                                                                                                                                             | AZ2                   |
      |                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                       |
      |                                 | We recommend you to select two AZs. The enterprise router will be deployed in both AZs that work in active-active mode, ensuring reliability and disaster recovery.                                                                                                                                                                                                                                                                                           |                       |
      |                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                       |
      |                                 | Traffic in an AZ is preferentially transmitted to the enterprise router in the same AZ to reduce latency.                                                                                                                                                                                                                                                                                                                                                     |                       |
      +---------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------+
      | Name                            | Mandatory                                                                                                                                                                                                                                                                                                                                                                                                                                                     | er-test-01            |
      |                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                       |
      |                                 | Enter a name for the enterprise router. The name:                                                                                                                                                                                                                                                                                                                                                                                                             |                       |
      |                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                       |
      |                                 | -  Must contain 1 to 64 characters.                                                                                                                                                                                                                                                                                                                                                                                                                           |                       |
      |                                 | -  Can contain letters, digits, underscores (_), hyphens (-), and periods (.).                                                                                                                                                                                                                                                                                                                                                                                |                       |
      +---------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------+
      | ASN                             | Mandatory                                                                                                                                                                                                                                                                                                                                                                                                                                                     | 64800                 |
      |                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                       |
      |                                 | An autonomous system is an IP network that is managed by an entity and has the same route policy. On a BGP network, each autonomous system is assigned a unique ASN to differentiate them.                                                                                                                                                                                                                                                                    |                       |
      |                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                       |
      |                                 | Specify a dedicated ASN in the range of 64512-65534 or 4200000000-4294967294.                                                                                                                                                                                                                                                                                                                                                                                 |                       |
      |                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                       |
      |                                 | Networks in the same region can be considered as an AS.                                                                                                                                                                                                                                                                                                                                                                                                       |                       |
      |                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                       |
      |                                 | When Direct Connect and Enterprise Router are used to set up a hybrid cloud network, it is recommended that you set the ASN of the enterprise router different from the BGP ASN of the Direct Connect virtual gateway. If there are multiple Direct Connect connections associated with the enterprise router and the connections do not work in load balancing or active/standby mode, set different BGP ASNs for the virtual gateways of these connections. |                       |
      |                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                       |
      |                                 | Default ASN: 64800                                                                                                                                                                                                                                                                                                                                                                                                                                            |                       |
      +---------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------+
      | Default Route Table Association | Optional                                                                                                                                                                                                                                                                                                                                                                                                                                                      | Enable                |
      |                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                       |
      |                                 | Enabled by default                                                                                                                                                                                                                                                                                                                                                                                                                                            |                       |
      |                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                       |
      |                                 | Enabling **Default Route Table Association** can simplify network configurations. After this function is enabled:                                                                                                                                                                                                                                                                                                                                             |                       |
      |                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                       |
      |                                 | a. An enterprise router automatically comes with a route table named **defaultRouteTable**. By default, this route table is the default association route table.                                                                                                                                                                                                                                                                                              |                       |
      |                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                       |
      |                                 |    After the enterprise router is created, you can create a custom route table and set it as the default association route table to replace the original one if needed. For details, see :ref:`Modifying an Enterprise Router <er_01_0013>`.                                                                                                                                                                                                                  |                       |
      |                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                       |
      |                                 | b. If you create an attachment to this enterprise router, the attachment will be automatically associated with the default association route table.                                                                                                                                                                                                                                                                                                           |                       |
      +---------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------+
      | Default Route Table Propagation | Optional                                                                                                                                                                                                                                                                                                                                                                                                                                                      | Enable                |
      |                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                       |
      |                                 | Enabled by default                                                                                                                                                                                                                                                                                                                                                                                                                                            |                       |
      |                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                       |
      |                                 | Enabling **Default Route Table Propagation** can simplify network configurations. After this function is enabled:                                                                                                                                                                                                                                                                                                                                             |                       |
      |                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                       |
      |                                 | a. An enterprise router automatically comes with a route table named **defaultRouteTable**. By default, this route table is the default propagation route table.                                                                                                                                                                                                                                                                                              |                       |
      |                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                       |
      |                                 |    If both **Default Route Table Association** and **Default Route Table Propagation** are enabled, **defaultRouteTable** is not only the default association route table but also the default propagation route table.                                                                                                                                                                                                                                       |                       |
      |                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                       |
      |                                 |    After the enterprise router is created, you can create a custom route table and set it as the default propagation route table to replace the original one if needed. For details, see :ref:`Modifying an Enterprise Router <er_01_0013>`.                                                                                                                                                                                                                  |                       |
      |                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                       |
      |                                 | b. If you create an attachment to this enterprise router, the attachment will be automatically propagated to the default propagation route table.                                                                                                                                                                                                                                                                                                             |                       |
      +---------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------+
      | Auto Accept Shared Attachments  | Optional                                                                                                                                                                                                                                                                                                                                                                                                                                                      | Disable               |
      |                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                       |
      |                                 | As the owner, you can share your enterprise router with other users. These other users can create attachments for your enterprise router.                                                                                                                                                                                                                                                                                                                     |                       |
      |                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                       |
      |                                 | -  If you do not select this option, you must manually accept attachments to this enterprise router from the accounts that this enterprise router is shared with.                                                                                                                                                                                                                                                                                             |                       |
      |                                 | -  If you select this option, the attachments from the accounts that this enterprise router is shared with will be automatically accepted.                                                                                                                                                                                                                                                                                                                    |                       |
      |                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                       |
      |                                 | For details, see :ref:`Sharing Overview <er_01_0095>`.                                                                                                                                                                                                                                                                                                                                                                                                        |                       |
      +---------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------+
      | Enterprise Project              | Mandatory                                                                                                                                                                                                                                                                                                                                                                                                                                                     | default               |
      |                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                       |
      |                                 | Select an enterprise project that the enterprise router will be added to.                                                                                                                                                                                                                                                                                                                                                                                     |                       |
      |                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                       |
      |                                 | An enterprise project facilitates project-level management and grouping of cloud resources and users. The default project is **default**.                                                                                                                                                                                                                                                                                                                     |                       |
      +---------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------+
      | Tag                             | Optional                                                                                                                                                                                                                                                                                                                                                                                                                                                      | **Tag key**: test     |
      |                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                       |
      |                                 | Add tags to help you quickly find your enterprise router.                                                                                                                                                                                                                                                                                                                                                                                                     | **Tag value**: 01     |
      |                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                       |
      |                                 | For details, see :ref:`Overview <er_01_0049>`.                                                                                                                                                                                                                                                                                                                                                                                                                |                       |
      +---------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------+
      | Description                     | Optional                                                                                                                                                                                                                                                                                                                                                                                                                                                      | ``-``                 |
      |                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                       |
      |                                 | Describe the enterprise router for easy identification.                                                                                                                                                                                                                                                                                                                                                                                                       |                       |
      +---------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------+

#. Click **Create Now**.

#. Confirm the enterprise router configurations and click **Submit**.

   The enterprise router list is displayed.

#. Check the enterprise router status.

   If the status changes from **Creating** to **Normal**, the enterprise router is successfully created.

Follow-Up Operations
--------------------

-  After an enterprise router is created, attach network instances to the enterprise router and configure routes. For details, see :ref:`Getting Started <er_01_0063>`.

-  If **Default Route Table Association** and **Default Route Table Propagation** are not enabled for an enterprise router, you need to:

   #. Create a custom route table for the enterprise router. For details, see :ref:`Creating a Route Table <er_01_0025>`.
   #. Create associations for the attachments of the enterprise router. For details, see :ref:`Creating an Association for an Attachment in a Route Table <er_01_0031>`.
   #. Use either of the following methods to add routes for the attachment to the route table:

      -  Create a propagation in the route table. For details, see :ref:`Creating a Propagation for an Attachment in the Route Table <er_01_0036>`.

         After the propagation is created, routes of the attachments to the enterprise router will be automatically propagated to the route table of the enterprise router.

      -  Add static routes to the route table. For details, see :ref:`Creating a Static Route <er_01_0041>`.

.. |image1| image:: /_static/images/en-us_image_0000001190483836.png
